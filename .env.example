# ============================================
# IOT Server 生产环境配置示例
# ============================================
# 
# 使用说明：
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 填写所有必需的配置项（标记为 REQUIRED）
# 3. 生成强密钥: openssl rand -base64 32
# 4. 确保 .env 文件不要提交到Git仓库
#
# ============================================

# ============================================
# 数据库配置 (REQUIRED)
# ============================================
POSTGRES_USER=iot
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_DB=iot_server

# 完整的数据库连接字符串
DATABASE_URL=postgres://iot:CHANGE_ME_STRONG_PASSWORD_HERE@postgres:5432/iot_server?sslmode=disable

# ============================================
# Redis配置 (REQUIRED)
# ============================================
REDIS_URL=redis:6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD

# ============================================
# 第三方Webhook配置 (OPTIONAL)
# ============================================
# 如果不需要推送到第三方,可以留空
WEBHOOK_URL=
WEBHOOK_SECRET=

# ============================================
# API密钥配置 (REQUIRED)
# ============================================
# 第三方调用API的密钥（至少32位强密钥）
# 生成命令: openssl rand -base64 32
THIRDPARTY_API_KEY=sk_live_CHANGE_ME_32_CHARS_OR_MORE

# 管理API密钥（至少32位强密钥）
API_KEY=sk_admin_CHANGE_ME_32_CHARS_OR_MORE

# ============================================
# 应用配置
# ============================================
IOT_CONFIG=/app/config.yaml
TZ=Asia/Shanghai
BUILD_VERSION=v1.0.0
LOG_LEVEL=info

# ============================================
# 监控配置 (OPTIONAL - 仅在启用监控时需要)
# ============================================
# Grafana管理员密码
GRAFANA_PASSWORD=admin

# ============================================
# 密钥生成命令参考
# ============================================
# 生成Base64编码的32字节密钥:
#   openssl rand -base64 32
#
# 生成十六进制编码的32字节密钥:
#   openssl rand -hex 32
#
# 生成UUID:
#   uuidgen
#
# ============================================
# 安全检查清单
# ============================================
# [ ] 所有密码和密钥已修改为强密钥（至少32位）
# [ ] POSTGRES_PASSWORD 已修改
# [ ] REDIS_PASSWORD 已修改
# [ ] THIRDPARTY_API_KEY 已修改
# [ ] API_KEY 已修改
# [ ] WEBHOOK_SECRET 已修改（如果启用）
# [ ] .env 文件权限设置为 600: chmod 600 .env
# [ ] .env 文件已添加到 .gitignore
# ============================================
