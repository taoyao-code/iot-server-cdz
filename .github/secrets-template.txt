==========================================================
GitHub Secrets 配置清单
==========================================================

配置路径: Settings → Secrets and variables → Actions

必需配置（8个）:
┌──────────────────────────────────────────────────────┐
│ 1. DOCKER_USERNAME                                   │
│    Docker Hub 用户名                                 │
│    示例: myusername                                  │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 2. DOCKER_PASSWORD                                   │
│    Docker Hub Access Token                           │
│    获取: hub.docker.com → Settings → Security        │
│    权限: Read & Write                                │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 3. STAGING_HOST                                      │
│    测试服务器地址                                    │
│    示例: 192.168.1.100 或 staging.example.com       │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 4. STAGING_USER                                      │
│    测试服务器 SSH 用户名                            │
│    示例: deploy                                      │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 5. STAGING_SSH_KEY                                   │
│    测试服务器 SSH 私钥（完整内容）                  │
│    包含: -----BEGIN...-----END-----                  │
│    生成: ssh-keygen -t ed25519                       │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 6. PROD_HOST                                         │
│    生产服务器地址                                    │
│    示例: 192.168.1.200 或 prod.example.com          │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 7. PROD_USER                                         │
│    生产服务器 SSH 用户名                            │
│    示例: deploy                                      │
└──────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────┐
│ 8. PROD_SSH_KEY                                      │
│    生产服务器 SSH 私钥（完整内容）                  │
│    建议: 与测试环境使用不同密钥                      │
└──────────────────────────────────────────────────────┘

可选配置:
┌──────────────────────────────────────────────────────┐
│ STAGING_PORT: SSH 端口（默认 22）                    │
│ PROD_PORT: SSH 端口（默认 22）                       │
│ PROD_DOMAIN: 生产域名（用于通知）                    │
│ CODECOV_TOKEN: 代码覆盖率上传                        │
└──────────────────────────────────────────────────────┘

==========================================================
Environments 配置
==========================================================

配置路径: Settings → Environments

1. 创建 "staging" 环境
   - ⬜ 无需审批
   - ⬜ 允许所有分支部署

2. 创建 "production" 环境
   - ✅ Required reviewers: 至少 1 人
   - ✅ Wait timer: 0 minutes  
   - ✅ Deployment branches: Selected branches
      • main
      • tags/v*.*.*

==========================================================
配置验证清单
==========================================================

✅ Docker Hub
   ⬜ 已创建 Access Token
   ⬜ 已添加到 GitHub Secrets
   ⬜ 已测试 docker login

✅ 测试服务器
   ⬜ 已创建 deploy 用户
   ⬜ deploy 用户已加入 docker 组
   ⬜ 已配置 SSH 密钥认证
   ⬜ 已创建 /opt/iot-server 目录
   ⬜ 已上传 docker-compose.yml

✅ 生产服务器  
   ⬜ 已创建 deploy 用户
   ⬜ 已配置 SSH 密钥认证
   ⬜ 已配置防火墙规则
   ⬜ 已创建备份目录

✅ GitHub 配置
   ⬜ 已添加所有必需 Secrets
   ⬜ 已创建 staging 环境
   ⬜ 已创建 production 环境
   ⬜ production 环境已配置审批人

==========================================================

