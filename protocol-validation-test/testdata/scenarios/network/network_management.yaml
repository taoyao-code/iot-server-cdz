# 网络管理测试
# 严格按照《设备对接指引-组网设备2024(1).txt》第2.2.6-2.2.8节构建

name: "网络管理测试"
description: "验证网络节点列表管理的完整流程"
category: "network"
version: "1.0"
author: "Protocol Validation System"
created_at: "2024-12-25T00:00:00Z"

scenarios:
  - id: "network_refresh_001"
    name: "刷新网络节点列表"
    description: "下发完整的网络节点列表进行刷新"
    type: "downlink"
    
    input:
      hex_frame: "fcff00240016001600000000822005200048690801020304050607080910111213141516171819202122fcee"
      scenario: "network_refresh"
      context:
        command_type: "network_refresh"
        node_count: 8
        
    expected:
      command: 0x0016
      direction: 0x00
      gateway_id: "82200520004869"
      frame_type: "network_management"
      valid: true
      
    assertions:
      - field: "command"
        type: "equals"
        value: 0x0016
        message: "网络管理命令码必须为0x0016"
        required: true
        
      - field: "direction"
        type: "equals"
        value: 0x00
        message: "下行帧方向必须为0x00"
        required: true

    metadata:
      protocol_version: "1.7"
      network_operation: "refresh_list"
      
  - id: "network_add_socket_001"
    name: "添加单个插座到网络"
    description: "向网络中添加单个插座设备"
    type: "downlink"
    
    input:
      hex_frame: "fcff001a0017001700000000822005200048690102030405060708fcee"
      scenario: "network_add_socket"
      context:
        command_type: "add_socket"
        socket_id: "0102030405060708"
        
    expected:
      command: 0x0017
      direction: 0x00
      valid: true
      
    assertions:
      - field: "command"
        type: "equals"
        value: 0x0017
        message: "添加插座命令码必须为0x0017"
        required: true

    metadata:
      protocol_version: "1.7"
      network_operation: "add_socket"
      
  - id: "network_delete_socket_001"
    name: "从网络删除单个插座"
    description: "从网络中移除单个插座设备"
    type: "downlink"
    
    input:
      hex_frame: "fcff001a0018001800000000822005200048690102030405060708fcee"
      scenario: "network_delete_socket"
      context:
        command_type: "delete_socket"
        socket_id: "0102030405060708"
        
    expected:
      command: 0x0018
      direction: 0x00
      valid: true
      
    assertions:
      - field: "command"
        type: "equals"
        value: 0x0018
        message: "删除插座命令码必须为0x0018"
        required: true

    metadata:
      protocol_version: "1.7"
      network_operation: "delete_socket"
      
  - id: "query_socket_status_001"  
    name: "查询插座状态"
    description: "主动查询指定插座的当前状态"
    type: "downlink"
    
    input:
      hex_frame: "fcff00160014001400000000822005200048690102fcee"
      scenario: "query_socket_status"
      
    expected:
      command: 0x0014
      direction: 0x00
      valid: true
      
    assertions:
      - field: "command"
        type: "equals"
        value: 0x0014
        message: "查询状态命令码必须为0x0014"
        required: true

    metadata:
      protocol_version: "1.7"
      query_type: "socket_status"